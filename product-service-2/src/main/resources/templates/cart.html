<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.org/">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <style>
        .total-price {
            text-align: center;
            margin-top: 50px;
            font-weight: bold;
            font-size: 22px;
        }
        .buy-now-button {
            text-align: center;
            margin-top: 20px;
        }

        .navbar-nav .nav-link:hover {
            color: #ff0000;
        }

        .navbar-nav .nav-item:hover {
            background-color: #535754;
        }

    </style>


    <title>Hello, world!</title>
</head>
<body>
<h1>Cart</h1>

<nav class="navbar navbar-expand-lg navbar-light bg-dark">
    <div class="container-fluid">

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                <li class="nav-item">
                    <a class="nav-link text-white" href="http://localhost:8080/products">Products</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link active text-white" aria-current="page" href="http://localhost:8081/home">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="http://localhost:8080/getOrders">Orders</a>
                </li>

            </ul>

            <div>
                <a class="nav-link text-white" href="http://localhost:8080/logout">Login Out</a>
            </div>

        </div>
    </div>
</nav>


<table border="1" class="table table-hover">
    <thead>
    <tr class="active">
        <th>Product ID</th>
        <th>Product Name</th>
        <th>Action</th>
        <th>Action</th>

    </tr>
    </thead>
    <tbody>

    <tr th:each="cart : ${cart}">
        <td th:text="${cart.id}"></td>
        <td th:text="${cart.productName}"></td>
        <td th:text="${cart.price}"></td>
        <td><a th:href="@{/deleteProductFromCart/{id}(id=${cart.id})}" class="btn btn-primary"> Delete </a>
    </tr>



    </tbody>
</table>


<p class="total-price" id="totalPrice">Total Price: </p>
<div class="buy-now-button" >
    <a class="btn btn-primary" href="http://localhost:8080/pay">Buy Now</a>
    <!--<button class="btn btn-primary">Buy now</button>-->
</div>
<script>
    // Funktion zum Berechnen der Summe der Preise
    function calculateTotalPrice() {
        var totalPrice = 0;
        var priceElements = document.querySelectorAll('td:nth-child(3)');

        // Iteriere Ã¼ber die Preis-Elemente und addiere die Preise zur Gesamtsumme
        for (var i = 0; i < priceElements.length; i++) {
            totalPrice += parseFloat(priceElements[i].textContent);
        }

        // Aktualisiere den Text der totalen Preis-Anzeige
        document.getElementById('totalPrice').textContent = 'Total Price: ' + totalPrice.toFixed(2);
    }

    // Rufe die Funktion zum Berechnen der Gesamtsumme auf
    calculateTotalPrice();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>
</html>
